CREATE DATABASE IF NOT EXISTS `db_qqspider_master`;
 GRANT ALL PRIVILEGES ON `db_qqspider_master`.* TO 'spideradmin'@'%' IDENTIFIED BY '2016spider';
USE `db_qqspider_master`;

CREATE TABLE IF NOT EXISTS `t_queue_status`(
	`tablename` VARCHAR(32) PRIMARY KEY,
	`idstart` BIGINT,
	`idend` BIGINT
);

CREATE TABLE IF NOT EXISTS `t_schedule_user_key` (
	`id` BIGINT PRIMARY KEY AUTO_INCREMENT,
	`qq` BIGINT NOT NULL UNIQUE KEY -- 为了去重，必须有unique key
)  ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE IF NOT EXISTS `t_schedule_follow_key` (-- 先不做多级队列，这样不用写Master
	`id` BIGINT PRIMARY KEY AUTO_INCREMENT,
	`qq` BIGINT NOT NULL,
	`pageNum` INT NOT NULL,
	UNIQUE KEY `t_schedule_follow_key_qq_pagenum`(`qq`,`pageNum`) -- 为了去重，必须有unique key
)  ENGINE=InnoDB DEFAULT CHARSET=utf8;




CREATE TABLE IF NOT EXISTS `t_schedule_user_key` (
    `id` BIGINT PRIMARY KEY AUTO_INCREMENT,
    `qq` BIGINT NOT NULL
)  
ENGINE=InnoDB DEFAULT CHARSET=utf8
PARTITION BY RANGE(id)
(
PARTITION p1000000 VALUES LESS THAN (1000000),
PARTITION p2000000 VALUES LESS THAN (2000000),
PARTITION p3000000 VALUES LESS THAN (3000000),
PARTITION p4000000 VALUES LESS THAN (4000000),
PARTITION p5000000 VALUES LESS THAN (5000000),
PARTITION p6000000 VALUES LESS THAN (6000000),
PARTITION p7000000 VALUES LESS THAN (7000000),
PARTITION p8000000 VALUES LESS THAN (8000000),
PARTITION p9000000 VALUES LESS THAN (9000000),
PARTITION p10000000 VALUES LESS THAN (10000000),
PARTITION p11000000 VALUES LESS THAN (11000000),
PARTITION p12000000 VALUES LESS THAN (12000000),
PARTITION p13000000 VALUES LESS THAN (13000000),
PARTITION p14000000 VALUES LESS THAN (14000000),
PARTITION p15000000 VALUES LESS THAN (15000000),
PARTITION pother VALUES LESS THAN (MAXVALUE)
); 
